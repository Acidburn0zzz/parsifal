
safe_eval := function (e, def) { if eval ("exists $e") then eval (e) else def fi };


foreach := function (_init, _next, _process) {
    local _resource, _object;
    _resource := _init;
    while _resource do
        _object := _next (_resource);
        if ! _object then break fi;
        _process (_object);
    done;
};
