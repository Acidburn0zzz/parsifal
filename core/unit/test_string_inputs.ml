(* TODO: add tests about get_in / get_out / exception throwing / etc *)
